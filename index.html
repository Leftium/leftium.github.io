<!DOCTYPE html>
<meta charset="utf-8" />
<title>Leftium: The Element of Creativity!</title>

<style>
  html,
  body {
    height: 100%;
    width: 100%;
    margin: 0;
    padding: 0;
  }

  body {
    background: black;

    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;

    overflow: hidden;
  }

  .logo {
    max-width: 100%;
    max-height: 100%;

    position: relative;
  }

  .logo-ligature {
    width: 100%;
    height: 100%;
    object-fit: contain;
    position: relative;
    pointer-events: none;
  }

  .logo-background {
    background-image: url(le_square_light_noborder.png);
    background-size: contain;
    background-position: center; /* Center the image */
    background-repeat: no-repeat; /* Do not repeat the image */

    -webkit-tap-highlight-color: transparent; /* Disable blinking */

    width: 74%;
    height: 74%;

    position: absolute !important;
    top: 13%;
    left: 13%;
  }
</style>

<div class="logo">
  <div class="logo-background"></div>
  <img class="logo-ligature" src="le_ligature.png" />
</div>

<script src="./lib/webgl-ripples.js"></script>

<script>
  let ripples;

  window.addEventListener("load", function () {
    const elBackground = document.querySelector(".logo-background");

    try {
      ripples = new Ripples(elBackground, {
        resolution: elBackground.offsetWidth / 2,
        dropRadius: 20,
        perturbance: 0.05,
      });
    } catch (e) {
      console.log(e);
    }

    // Automatic drops
    setInterval(function () {
      const x = Math.random() * elBackground.offsetWidth;
      const y = Math.random() * elBackground.offsetHeight;
      const dropRadius = 20;
      const strength = 0.04 + Math.random() * 0.04;
      ripples.drop(x, y, dropRadius, strength);
    }, 400);

    window.addEventListener("resize", adjustBackgroundSize);
    adjustBackgroundSize();

    // Animate ligature
    let angle = 0;
    const elLigature = document.querySelector(".logo-ligature");
    const animate = function (time, lastTime) {
      if (lastTime != null) {
        angle += (time - lastTime) * 0.01;
      }
      elLigature.style.top = `${Math.sin(angle / 5) * 20}px`;
      elLigature.style.left = `${Math.cos(angle / 13) * 20}px`;
      requestAnimationFrame((newTime) => animate(newTime, time));
    };
    requestAnimationFrame(animate);
  });

  function adjustBackgroundSize() {
    const elLigature = document.querySelector(".logo-ligature");
    const elBackground = document.querySelector(".logo-background");
    const ligatureWidth = elLigature.offsetWidth;
    const ligatureHeight = elLigature.offsetHeight;
    const ratio = 1510 / 2048;
    const width = Math.floor(Math.min(ligatureWidth, ligatureHeight) * ratio);

    elBackground.style.width = `${width}px`;
    elBackground.style.height = `${width}px`;
    const offset = (ligatureWidth - width) / 2;
    elBackground.style.left = `${offset}px`;
    elBackground.style.right = `${offset}px`;

    ripples.updateSize();
  }
</script>
